<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3x-ui | Login</title>
    <style>
        body { margin: 0; padding: 0; background: #1a1a1a; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: sans-serif; }
        .card { background: #2d2d2d; padding: 40px; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); text-align: center; }
        h1 { color: #fff; margin: 0 0 20px 0; font-weight: 300; letter-spacing: 2px; }
        .hint { color: #666; margin-bottom: 30px; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="card">
        <h1>ACCESS CONTROL</h1>
        <p class="hint">Only the Owner May Enter</p>
        
        <!-- Telegram Widget Placeholder -->
        <!-- Replace 'YOUR_BOT_USERNAME' with your actual bot username -->
        <script async src="https://telegram.org/js/telegram-widget.js?22" 
                data-telegram-login="Zaki_MaoJi_bot" 
                data-size="large" 
                data-radius="10" 
                data-onauth="onTelegramAuth(user)" 
                data-request-access="write"></script>
    </div>

    <script>
        function onTelegramAuth(user) {
            fetch('/login', {
                method: 'POST',
                headers: {'Content-Type': 'application/json'},
                body: JSON.stringify({
                    telegram_data: user // Send raw TG data to backend
                })
            }).then(res => res.json()).then(res => {
                if (res.success) {
                    location.href = '/panel';
                } else {
                    alert(res.msg);
                }
            }).catch(e => {
                alert('Login Error: ' + e);
            });
        }
    </script>
</body>
</html>
